name: Daily Robot Catalog Parser

on:
  schedule:
    # –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 03:00 UTC (07:00–ø–æ –°–∞—Ä–∞—Ç–æ–≤—É, GMT+4)
    - cron: '0 3 * * *'
  
  # –ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Ä—É—á–Ω—É—é
  workflow_dispatch:

jobs:
  parse-robot-catalog:
    runs-on: ubuntu-latest
    
    steps:
      - name: ü§ñ Parse Robot Catalog via Rube
        run: |
          echo "üöÄ Starting robot catalog parser..."
          
          curl -X POST "https://backend.composio.dev/api/v1/actions/rcp_zqcpF4RJ7QIv/execute" \
            -H "Content-Type: application/json" \
            -H "x-api-key: ${{ secrets.COMPOSIO_API_KEY }}" \
            -d '{
              "input": {
                "api_key": "prorobotov2024",
                "api_url": "https://robototehnika.vercel.app/api/robots",
                "search_mode": "all"
              }
            }' | jq '.'
          
          echo "‚úÖ Robot catalog parsing completed!"
      
      - name: ìåä Summary
        run: |
          echo "üéâ Daily robot catalog update finished!"
          echo "Check: https://robototehnika.vercel.app/api/robots"