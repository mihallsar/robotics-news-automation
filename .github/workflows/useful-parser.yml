name: Useful Resources Parser (Daily)

on:
  schedule:
    - cron: '0 6,18 * * *'  # Ğ”Ğ²Ğ°Ğ¶Ğ´Ñ‹ Ğ² Ğ´ĞµĞ½ÑŒ: 10:00 Ğ¸ 22:00 Ğ¿Ğ¾ Ğ¡Ğ°Ñ€Ğ°Ñ‚Ğ¾Ğ²Ñƒ
  workflow_dispatch:

jobs:
  run-useful-recipe:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ’¡ Run Useful Resources Parser
        run: |
          echo "ğŸš€ Starting useful robotics resources parser..."
          echo "ğŸ” Searching for tutorials, tools, and resources"
          echo "ğŸ“¡ Publishing to: robototehnika.vercel.app/api/useful"

          curl -X POST "https://backend.composio.dev/api/v3/recipes/rcp_EuZwKlnKMhyB/execute" \
            -H "X-API-Key: ${{ secrets.COMPOSIO_API_KEY }}" \
            -H "Content-Type: application/json" \
            -d '{
              "input_data": {
                "webhook_url": "https://robototehnika.vercel.app/api/useful",
                "api_key": "prorobotov2024",
                "resource_count": "2"
              }
            }' | jq '.data'

          echo ""
          echo "âœ… Useful resources parsing completed!"

      - name: ğŸ“Š Summary
        run: |
          echo "ğŸ‰ Useful resources update finished!"
          echo "ğŸ“š Found tutorials, tools, and learning resources"
          echo "Check: https://robototehnika.vercel.app/api/useful"
