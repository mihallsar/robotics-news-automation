name: Robotics News Parser

on:
  schedule:
    # Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ² 2:00 Ğ¸ 14:00 UTC (ÑÑ‚Ğ¾ 6:00 Ğ¸ 18:00 Ğ¿Ğ¾ Ğ²Ğ°ÑˆĞµĞ¼Ñƒ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸ GMT+4)
    - cron: '0 6,18 * * *'  # Ğ”Ğ²Ğ°Ğ¶Ğ´Ñ‹ Ğ² Ğ´ĞµĞ½ÑŒ: 10:00 Ğ¸ 22:00 Ğ¿Ğ¾ Ğ¡Ğ°Ñ€Ğ°Ñ‚Ğ¾Ğ²Ñƒ
  
  # Ğ’Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ Ğ²Ñ€ÑƒÑ‡Ğ½ÑƒÑ Ñ‡ĞµÑ€ĞµĞ· GitHub UI
  workflow_dispatch:

jobs:
  parse-and-publish-news:
    runs-on: ubuntu-latest
    
    steps:
      - name:  ğŸ“° Execute Robotics News Parser (7 days)
        run: |
          echo "ğŸš€ Starting news parser..."
          echo "ğŸ“… Search period: 7 days"
          echo "ğŸ” Keywords: robots robotics AI automation humanoid"
          echo "ğŸ“¡ Publishing to: robototehnika.vercel.app"
          
          curl -X POST \
            -H "Content-Type: application/json" \
            -H "X-API-Key: ${{ secrets.COMPOSIO_API_KEY }}" \
            https://backend.composio.dev/api/v3/recipes/rcp_YxSUTC0geTxp/execute \
            -d '{
              "search_keywords": "robots robotics artificial intelligence automation humanoid",
              "time_period": "7d",
              "news_count": "10",
              "webhook_url": "https://robototehnika.vercel.app/api/news",
              "api_key": "prorobotov2024"
            }' | jq '.data'
          
          echo ""
          echo "âœ… News parsing completed!"
      
      - name: ğŸ“Š Summary
        run: |
          echo "ğŸ‰ Robotics news update finished!"
          echo "ğŸ”¥ Searching 7 days back for fresh news"
          echo "ğŸ“ˆ Fetching up to 10 news articles"
          echo "ğŸ¯ Publishing directly to API"
