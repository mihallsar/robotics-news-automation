name: DIY Project Parser (Daily)

on:
  schedule:
    - cron: '0 6,18 * * *'  # Ğ”Ğ²Ğ°Ğ¶Ğ´Ñ‹ Ğ² Ğ´ĞµĞ½ÑŒ: 10:00 Ğ¸ 22:00 Ğ¿Ğ¾ Ğ¡Ğ°Ñ€Ğ°Ñ‚Ğ¾Ğ²Ñƒ
  workflow_dispatch:

jobs:
  run-diy-recipe:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸ”§ Run DIY Projects Parser
        run: |
          echo "ğŸš€ Starting DIY robotics projects parser..."
          echo "ğŸ” Keywords: DIY robot Arduino Raspberry Pi"
          echo "ğŸ“¡ Publishing to: robototehnika.vercel.app/api/projects"

          curl -X POST "https://backend.composio.dev/api/v3/recipes/rcp_Dv0XyS0Htw66/execute" \
               -H "X-API-Key: ${{ secrets.COMPOSIO_API_KEY }}" \
               -H "Content-Type: application/json" \
               -d '{
                 "input_data": {
                   "webhook_url": "https://robototehnika.vercel.app/api/projects",
                   "api_key": "prorobotov2024",
                   "search_keywords": "DIY robot Arduino Raspberry Pi robotics project tutorial",
                   "project_count": "5"
                 }
               }' | jq '.data'

          echo ""
          echo "âœ… DIY projects parsing completed!"

      - name: ğŸ“Š Summary
        run: |
          echo "ğŸ‰ DIY projects update finished!"
          echo "ğŸ”¨ Found Arduino, Raspberry Pi, and DIY robot projects"
          echo "Check: https://robototehnika.vercel.app/api/projects"
